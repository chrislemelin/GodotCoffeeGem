[gd_scene load_steps=45 format=3 uid="uid://clabt1hecikx2"]

[ext_resource type="Script" path="res://gamemanager/MapGameManager.cs" id="1_sas1p"]
[ext_resource type="Script" path="res://map/Map.cs" id="1_vwohc"]
[ext_resource type="Resource" uid="uid://b3grjg3l83q21" path="res://cards/cardResources/cardLists/CardPool.tres" id="2_6g8vu"]
[ext_resource type="Texture2D" uid="uid://bdhybcy6tcg12" path="res://placeholders/cards/square.png" id="2_g041w"]
[ext_resource type="Resource" uid="uid://bcelpenpmwhtr" path="res://relics/RelicLists/RelicPool.tres" id="3_mpj51"]
[ext_resource type="Resource" uid="uid://dqyh1awc8okrc" path="res://cards/cardResources/cardLists/StarterDeck.tres" id="4_86n8f"]
[ext_resource type="PackedScene" uid="uid://bs0yawupejkyk" path="res://map/MapLocation.tscn" id="4_pfyjt"]
[ext_resource type="Texture2D" uid="uid://rjd6y8xiofd3" path="res://placeholders/soft-gem.png" id="4_rxy0n"]
[ext_resource type="Script" path="res://UI/MapEventResolveUI.cs" id="7_7gh4s"]
[ext_resource type="Texture2D" uid="uid://cx5yqj107517" path="res://placeholders/Map/Map-scaledup-nn.png" id="7_7jcq4"]
[ext_resource type="Texture2D" uid="uid://2ko4vy4jrfcu" path="res://cards/cardResources/cardArt/Switch-Vert.png" id="9_c3q5o"]
[ext_resource type="PackedScene" uid="uid://bktkdd4va45a8" path="res://UI/DeckView/DeckView.tscn" id="10_6e71l"]
[ext_resource type="Script" path="res://cards/cardResources/movementCards/SwitchVertCardEffect.cs" id="10_ujm25"]
[ext_resource type="Script" path="res://util/lerp.cs" id="11_8ihbg"]
[ext_resource type="Script" path="res://cards/cardResources/core/CardResource.cs" id="11_fn4xu"]
[ext_resource type="Texture2D" uid="uid://dc30cb72mvn22" path="res://placeholders/character/Bob_run_16x16.png" id="11_g4jmp"]
[ext_resource type="PackedScene" uid="uid://cxavdfi52bnxv" path="res://UI/CardSelectionUI.tscn" id="11_rx5ww"]
[ext_resource type="Texture2D" uid="uid://bea2yc8f7rieg" path="res://cards/cardResources/cardArt/Switch-horizontal_real.png" id="12_jbsyq"]
[ext_resource type="Script" path="res://cards/cardResources/movementCards/SwitchHorizCardEffect.cs" id="13_ycwk0"]
[ext_resource type="Script" path="res://cards/cardResources/movementCards/SwitchCardEffect.cs" id="14_dr0te"]
[ext_resource type="Theme" uid="uid://cb56mr55sbqyi" path="res://UI/Themes/UITheme.tres" id="21_ped7m"]
[ext_resource type="Theme" uid="uid://decpltn4recv4" path="res://UI/Themes/ButtonTheme.tres" id="22_epuo7"]

[sub_resource type="Resource" id="Resource_lv7q0"]
script = ExtResource("10_ujm25")
Range = 1.0
Value = -1
BlackGems = 0
CardsToDiscard = 0
canTargetBlackGems = false
consume = false
retain = false
effectGemType = 0

[sub_resource type="Resource" id="Resource_j21f5"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Vertical"
Description = "Switch the positions of two vertically adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("9_c3q5o")
coinCost = 0
cardEffect = SubResource("Resource_lv7q0")

[sub_resource type="Resource" id="Resource_ym5bx"]
script = ExtResource("13_ycwk0")
Range = 1.0
Value = -1
BlackGems = 0
CardsToDiscard = 0
canTargetBlackGems = false
consume = false
retain = false
effectGemType = 0

[sub_resource type="Resource" id="Resource_7p6sj"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Horiz"
Description = "Switch the positions of two horizontally adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("12_jbsyq")
coinCost = 0
cardEffect = SubResource("Resource_ym5bx")

[sub_resource type="Resource" id="Resource_tlj12"]
resource_local_to_scene = true
script = ExtResource("14_dr0te")
Range = 1.0
Value = 0
BlackGems = 0
CardsToDiscard = 0
canTargetBlackGems = true
consume = false
retain = false
effectGemType = 0

[sub_resource type="Resource" id="Resource_t2nhx"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch"
Description = "Switch the positions of two vertically or horizontally adjacent ingredients"
Cost = 1
rarity = 0
coinCost = 0
cardEffect = SubResource("Resource_tlj12")

[sub_resource type="Resource" id="Resource_j3ceq"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Vertical"
Description = "Switch the positions of two vertically adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("9_c3q5o")
coinCost = 0
cardEffect = SubResource("Resource_lv7q0")

[sub_resource type="Resource" id="Resource_kb673"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Horiz"
Description = "Switch the positions of two horizontally adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("12_jbsyq")
coinCost = 0
cardEffect = SubResource("Resource_ym5bx")

[sub_resource type="Resource" id="Resource_l5j6y"]
resource_local_to_scene = true
script = ExtResource("14_dr0te")
Range = 1.0
Value = 0
BlackGems = 0
CardsToDiscard = 0
canTargetBlackGems = true
consume = false
retain = false
effectGemType = 0

[sub_resource type="Resource" id="Resource_w5753"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch"
Description = "Switch the positions of two vertically or horizontally adjacent ingredients"
Cost = 1
rarity = 0
coinCost = 0
cardEffect = SubResource("Resource_l5j6y")

[sub_resource type="Resource" id="Resource_djxch"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Vertical"
Description = "Switch the positions of two vertically adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("9_c3q5o")
coinCost = 0
cardEffect = SubResource("Resource_lv7q0")

[sub_resource type="Resource" id="Resource_gf2jx"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Horiz"
Description = "Switch the positions of two horizontally adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("12_jbsyq")
coinCost = 0
cardEffect = SubResource("Resource_ym5bx")

[sub_resource type="Resource" id="Resource_bimhj"]
resource_local_to_scene = true
script = ExtResource("14_dr0te")
Range = 1.0
Value = 0
BlackGems = 0
CardsToDiscard = 0
canTargetBlackGems = true
consume = false
retain = false
effectGemType = 0

[sub_resource type="Resource" id="Resource_kr2ov"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch"
Description = "Switch the positions of two vertically or horizontally adjacent ingredients"
Cost = 1
rarity = 0
coinCost = 0
cardEffect = SubResource("Resource_bimhj")

[sub_resource type="Resource" id="Resource_nekim"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Vertical"
Description = "Switch the positions of two vertically adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("9_c3q5o")
coinCost = 0
cardEffect = SubResource("Resource_lv7q0")

[sub_resource type="Resource" id="Resource_scuqb"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Horiz"
Description = "Switch the positions of two horizontally adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("12_jbsyq")
coinCost = 0
cardEffect = SubResource("Resource_ym5bx")

[sub_resource type="Resource" id="Resource_23mlu"]
resource_local_to_scene = true
script = ExtResource("14_dr0te")
Range = 1.0
Value = 0
BlackGems = 0
CardsToDiscard = 0
canTargetBlackGems = true
consume = false
retain = false
effectGemType = 0

[sub_resource type="Resource" id="Resource_keqew"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch"
Description = "Switch the positions of two vertically or horizontally adjacent ingredients"
Cost = 1
rarity = 0
coinCost = 0
cardEffect = SubResource("Resource_23mlu")

[sub_resource type="Resource" id="Resource_8q6kl"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Vertical"
Description = "Switch the positions of two vertically adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("9_c3q5o")
coinCost = 0
cardEffect = SubResource("Resource_lv7q0")

[sub_resource type="Resource" id="Resource_oosji"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch Horiz"
Description = "Switch the positions of two horizontally adjacent ingredients"
Cost = 1
rarity = 0
Picture = ExtResource("12_jbsyq")
coinCost = 0
cardEffect = SubResource("Resource_ym5bx")

[sub_resource type="Resource" id="Resource_smct3"]
resource_local_to_scene = true
script = ExtResource("14_dr0te")
Range = 1.0
Value = 0
BlackGems = 0
CardsToDiscard = 0
canTargetBlackGems = true
consume = false
retain = false
effectGemType = 0

[sub_resource type="Resource" id="Resource_5c33p"]
resource_local_to_scene = true
script = ExtResource("11_fn4xu")
Title = "Switch"
Description = "Switch the positions of two vertically or horizontally adjacent ingredients"
Cost = 1
rarity = 0
coinCost = 0
cardEffect = SubResource("Resource_smct3")

[node name="GameManager" type="Node2D" node_paths=PackedStringArray("newCardSelection", "deckViewUI")]
script = ExtResource("1_sas1p")
newCardSelection = NodePath("CardSelectionUI")
deckViewUI = NodePath("DeckViewUI")
cardPool = ExtResource("2_6g8vu")
relicList = ExtResource("3_mpj51")
defaultCardList = ExtResource("4_86n8f")

[node name="Map" type="Node2D" parent="." node_paths=PackedStringArray("home", "mapEventResolveUI", "topPathControls", "botPathControls", "character", "topPathNodes", "botPathNodes", "topLines", "botlines")]
script = ExtResource("1_vwohc")
home = NodePath("Control/Home")
mapEventResolveUI = NodePath("../MapEventText")
mapLocationPackedScene = ExtResource("4_pfyjt")
topPathControls = [NodePath("Control/TopPath/Control"), NodePath("Control/TopPath/Control3")]
botPathControls = [NodePath("Control/BotPath/Control"), NodePath("Control/BotPath/Control3")]
character = NodePath("../Character")
topPathNodes = NodePath("TopPath")
botPathNodes = NodePath("BotPath")
topLines = [NodePath("Paths/Line2D4"), NodePath("Paths/Line2D5"), NodePath("Paths/Line2D6")]
botlines = [NodePath("Paths/Line2D"), NodePath("Paths/Line2D2"), NodePath("Paths/Line2D3")]

[node name="Map2" type="Sprite2D" parent="Map"]
position = Vector2(961.074, 540)
scale = Vector2(1.23, 1.23)
texture = ExtResource("7_7jcq4")

[node name="Background" type="TextureRect" parent="Map"]
visible = false
modulate = Color(1, 1, 0.831373, 1)
offset_right = 1920.0
offset_bottom = 1080.0
texture = ExtResource("2_g041w")

[node name="Control" type="Control" parent="Map"]
layout_mode = 3
anchors_preset = 0
offset_top = -8.0
offset_bottom = -8.0

[node name="TopPath" type="Control" parent="Map/Control"]
anchors_preset = 0

[node name="Control" type="Control" parent="Map/Control/TopPath"]
anchors_preset = 0
offset_left = 1151.0
offset_top = 254.0
offset_right = 1151.0
offset_bottom = 254.0

[node name="MapLocation" parent="Map/Control/TopPath/Control" instance=ExtResource("4_pfyjt")]
visible = false
offset_left = 0.0
offset_right = 1.0
vertSwitchCard = SubResource("Resource_j21f5")
horizSwitchCard = SubResource("Resource_7p6sj")
upgradedSwitchCard = SubResource("Resource_t2nhx")

[node name="Control3" type="Control" parent="Map/Control/TopPath"]
anchors_preset = 0
offset_left = 1349.0
offset_top = 462.0
offset_right = 1349.0
offset_bottom = 462.0

[node name="MapLocation" parent="Map/Control/TopPath/Control3" node_paths=PackedStringArray("image", "label") instance=ExtResource("4_pfyjt")]
visible = false
offset_left = 0.0
offset_right = 96.0
offset_bottom = 81.0
image = NodePath("../../Control/MapLocation/TextureRect")
label = NodePath("../../Control/MapLocation/RichTextLabel")
vertSwitchCard = SubResource("Resource_j3ceq")
horizSwitchCard = SubResource("Resource_kb673")
upgradedSwitchCard = SubResource("Resource_w5753")

[node name="BotPath" type="Control" parent="Map/Control"]
anchors_preset = 0

[node name="Control" type="Control" parent="Map/Control/BotPath"]
layout_mode = 3
anchors_preset = 0
offset_left = 500.0
offset_top = 713.0
offset_right = 501.0
offset_bottom = 714.0

[node name="MapLocation" parent="Map/Control/BotPath/Control" node_paths=PackedStringArray("image", "label") instance=ExtResource("4_pfyjt")]
visible = false
offset_left = 0.0
offset_right = 1.0
image = NodePath("../../../TopPath/Control/MapLocation/TextureRect")
label = NodePath("../../../TopPath/Control/MapLocation/RichTextLabel")
vertSwitchCard = SubResource("Resource_djxch")
horizSwitchCard = SubResource("Resource_gf2jx")
upgradedSwitchCard = SubResource("Resource_kr2ov")

[node name="Control3" type="Control" parent="Map/Control/BotPath"]
layout_mode = 3
anchors_preset = 0
offset_left = 701.0
offset_top = 918.0
offset_right = 701.0
offset_bottom = 918.0

[node name="MapLocation" parent="Map/Control/BotPath/Control3" node_paths=PackedStringArray("image", "label") instance=ExtResource("4_pfyjt")]
visible = false
offset_left = 0.0
offset_right = 1.0
image = NodePath("../../../TopPath/Control/MapLocation/TextureRect")
label = NodePath("../../../TopPath/Control/MapLocation/RichTextLabel")
vertSwitchCard = SubResource("Resource_nekim")
horizSwitchCard = SubResource("Resource_scuqb")
upgradedSwitchCard = SubResource("Resource_keqew")

[node name="Home" parent="Map/Control" instance=ExtResource("4_pfyjt")]
offset_left = 1186.0
offset_top = 950.0
offset_right = 1282.0
offset_bottom = 1031.0
type = 4
vertSwitchCard = SubResource("Resource_8q6kl")
horizSwitchCard = SubResource("Resource_oosji")
upgradedSwitchCard = SubResource("Resource_5c33p")

[node name="Paths" type="Node2D" parent="Map"]
visible = false

[node name="Line2D" type="Line2D" parent="Map/Paths"]
position = Vector2(259.01, 842.908)
points = PackedVector2Array(-32.0101, -178.908, 282.99, -32.9084)
texture = ExtResource("4_rxy0n")
texture_mode = 1

[node name="Line2D2" type="Line2D" parent="Map/Paths"]
position = Vector2(259.01, 842.908)
points = PackedVector2Array(526.99, -43.9084, 944.99, -35.9084)
texture = ExtResource("4_rxy0n")
texture_mode = 1

[node name="Line2D3" type="Line2D" parent="Map/Paths"]
position = Vector2(776, 706)
points = PackedVector2Array(668, 71.9999, 903, -157)
texture = ExtResource("4_rxy0n")
texture_mode = 1

[node name="Line2D4" type="Line2D" parent="Map/Paths"]
position = Vector2(776, 706)
points = PackedVector2Array(609, -459, 838, -298)
texture = ExtResource("4_rxy0n")
texture_mode = 1

[node name="Line2D5" type="Line2D" parent="Map/Paths"]
position = Vector2(776, 706)
points = PackedVector2Array(-27.9999, -477, 371, -500)
texture = ExtResource("4_rxy0n")
texture_mode = 1

[node name="Line2D6" type="Line2D" parent="Map/Paths"]
position = Vector2(776, 706)
points = PackedVector2Array(-477, -196, -253, -467)
texture = ExtResource("4_rxy0n")
texture_mode = 1

[node name="TopPath" type="Node2D" parent="Map"]

[node name="Node2D2" type="Node2D" parent="Map/TopPath"]
position = Vector2(893, 75)

[node name="Node2D3" type="Node2D" parent="Map/TopPath"]
position = Vector2(1088, 270)

[node name="Node2D4" type="Node2D" parent="Map/TopPath"]
position = Vector2(1275, 460)

[node name="Node2D5" type="Node2D" parent="Map/TopPath"]
position = Vector2(1411, 596)

[node name="Node2D6" type="Node2D" parent="Map/TopPath"]
position = Vector2(1129, 763)

[node name="BotPath" type="Node2D" parent="Map"]

[node name="Node2D2" type="Node2D" parent="Map/BotPath"]
position = Vector2(327, 617)

[node name="Node2D3" type="Node2D" parent="Map/BotPath"]
position = Vector2(431, 727)

[node name="Node2D4" type="Node2D" parent="Map/BotPath"]
position = Vector2(616, 918)

[node name="Node2D5" type="Node2D" parent="Map/BotPath"]
position = Vector2(704, 1012)

[node name="Node2D6" type="Node2D" parent="Map/BotPath"]
position = Vector2(1129, 763)

[node name="Character" type="Node2D" parent="."]
position = Vector2(450, 510)
scale = Vector2(4, 4)
script = ExtResource("11_8ihbg")
speed = 250.0

[node name="Sprite2D" type="Sprite2D" parent="Character"]
position = Vector2(-0.5, -13.5)
texture = ExtResource("11_g4jmp")
hframes = 24
frame = 1

[node name="RichTextLabel" type="RichTextLabel" parent="."]
offset_left = 790.0
offset_top = 416.0
offset_right = 1141.0
offset_bottom = 541.0
theme_override_font_sizes/normal_font_size = 25
text = "Click top or bottom buildings to choose a path to get back home"

[node name="CardSelectionUI" parent="." node_paths=PackedStringArray("deckViewUI") groups=["CardSelectionUI"] instance=ExtResource("11_rx5ww")]
unique_name_in_owner = true
visible = false
deckViewUI = NodePath("../DeckViewUI")

[node name="DeckViewUI" parent="." groups=["DeckViewUI"] instance=ExtResource("10_6e71l")]
unique_name_in_owner = true
visible = false

[node name="MapEventText" type="Control" parent="." node_paths=PackedStringArray("title", "description", "button")]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("7_7gh4s")
title = NodePath("Control/title")
description = NodePath("Control/description")
button = NodePath("Control/Continue")

[node name="Background" type="TextureRect" parent="MapEventText"]
modulate = Color(0, 0, 0, 0.498039)
layout_mode = 0
offset_right = 1922.0
offset_bottom = 1079.0
texture = ExtResource("2_g041w")

[node name="Forground" type="Panel" parent="MapEventText"]
modulate = Color(0.831373, 0.933333, 0.921569, 1)
layout_mode = 0
offset_left = 551.0
offset_top = 263.0
offset_right = 1420.0
offset_bottom = 832.0
theme = ExtResource("21_ped7m")

[node name="Control" type="Control" parent="MapEventText"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="title" type="RichTextLabel" parent="MapEventText/Control"]
layout_mode = 0
offset_left = 675.0
offset_top = 287.0
offset_right = 1288.0
offset_bottom = 363.0
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_font_sizes/normal_font_size = 50
bbcode_enabled = true
text = "[center]TITLE TEXT"

[node name="description" type="RichTextLabel" parent="MapEventText/Control"]
layout_mode = 0
offset_left = 678.0
offset_top = 367.0
offset_right = 1291.0
offset_bottom = 730.0
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_font_sizes/normal_font_size = 25
bbcode_enabled = true
text = "Title Description"

[node name="Continue" type="Button" parent="MapEventText/Control"]
layout_mode = 0
offset_left = 888.0
offset_top = 748.0
offset_right = 1052.0
offset_bottom = 797.0
theme = ExtResource("22_epuo7")
text = "Continue
"
